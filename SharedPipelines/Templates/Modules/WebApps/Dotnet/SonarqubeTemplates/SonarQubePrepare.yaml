parameters:
  - name: WorkingDirectory
    type: string
  - name: SonarQube
    type: object
steps:
  - ${{ if eq(parameters.SonarQube.Enabled, true) }}:
    - task: SonarSource.sonarqube.15B84CA1-B62F-4A2A-A403-89B77A063157.SonarQubePrepare@5
      displayName: 'Prepare analysis on SonarQube'
      inputs:
        SonarQube: '${{ parameters.SonarQube.ServiceConnection }}'
        projectKey: ${{ parameters.SonarQube.ProjectKey }}
        extraProperties: |
            sonar.coverageReportPaths=${{ parameters.WorkingDirectory}}/coverlet/reports/SonarQube.xml 